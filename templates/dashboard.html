{% extends "base.html" %}
{% block content %}

<h1 class="text-2xl font-bold mb-4">Dashboard - {{ session.username }}</h1>

<div class="grid grid-cols-3 gap-4 mb-6">
  <div class="p-4 bg-green-200 rounded text-center">Income: {{ total_income }}</div>
  <div class="p-4 bg-red-200 rounded text-center">Expense: {{ total_expense }}</div>
  <div class="p-4 bg-blue-200 rounded text-center">Balance: {{ balance }}</div>
</div>

<div class="flex gap-4 mb-6">
  <a href="/add_income" class="bg-green-500 text-white p-2 rounded">Add Income</a>
  <a href="/add_expense" class="bg-red-500 text-white p-2 rounded">Add Expense</a>
  <a href="/logout" class="bg-gray-500 text-white p-2 rounded">Logout</a>
</div>

<h2 class="text-xl font-bold mt-6 mb-2">Income Records</h2>
<table class="w-full text-left border mb-4">
  <tr class="bg-gray-200">
    <th class="p-2">Date</th>
    <th class="p-2">Category</th>
    <th class="p-2">Amount</th>
    <th class="p-2">Description</th>
    <th class="p-2">Actions</th>
  </tr>
  {% for rec in income_records %}
  <tr class="border-t">
    <td class="p-2">{{ rec[3] }}</td>
    <td class="p-2">{{ rec[1] }}</td>
    <td class="p-2">{{ rec[2] }}</td>
    <td class="p-2">{{ rec[4] }}</td>
    <td class="p-2">
      <a href="{{ url_for('edit_income', income_id=rec[0]) }}" class="text-blue-500 hover:underline mr-2">Edit</a>
      <a href="{{ url_for('delete_income', income_id=rec[0]) }}" class="text-red-500 hover:underline" onclick="return confirm('Are you sure you want to delete this income?');">Delete</a>
    </td>
  </tr>
  {% endfor %}
</table>

<!-- Income Pagination -->
<div class="flex gap-2 mb-6">
  {% for p in range(1, total_income_pages+1) %}
    {% if p == page %}
      <span class="px-2 py-1 bg-blue-500 text-white rounded">{{ p }}</span>
    {% else %}
      <a href="{{ url_for('dashboard', page=p) }}" class="px-2 py-1 bg-gray-200 rounded hover:bg-gray-400">{{ p }}</a>
    {% endif %}
  {% endfor %}
</div>

<h2 class="text-xl font-bold mt-6 mb-2">Expense Records</h2>
<table class="w-full text-left border mb-4">
  <tr class="bg-gray-200">
    <th class="p-2">Date</th>
    <th class="p-2">Category</th>
    <th class="p-2">Amount</th>
    <th class="p-2">Description</th>
    <th class="p-2">Actions</th>
  </tr>
  {% for rec in expense_records %}
  <tr class="border-t">
    <td class="p-2">{{ rec[3] }}</td>
    <td class="p-2">{{ rec[1] }}</td>
    <td class="p-2">{{ rec[2] }}</td>
    <td class="p-2">{{ rec[4] }}</td>
    <td class="p-2">
      <a href="{{ url_for('edit_expense', expense_id=rec[0]) }}" class="text-blue-500 hover:underline mr-2">Edit</a>
      <a href="{{ url_for('delete_expense', expense_id=rec[0]) }}" class="text-red-500 hover:underline" onclick="return confirm('Are you sure you want to delete this expense?');">Delete</a>
    </td>
  </tr>
  {% endfor %}
</table>

<!-- Expense Pagination -->
<div class="flex gap-2 mb-4">
  {% for p in range(1, total_expense_pages+1) %}
    {% if p == page %}
      <span class="px-2 py-1 bg-blue-500 text-white rounded">{{ p }}</span>
    {% else %}
      <a href="{{ url_for('dashboard', page=p) }}" class="px-2 py-1 bg-gray-200 rounded hover:bg-gray-400">{{ p }}</a>
    {% endif %}
  {% endfor %}
</div>

{% endblock %} 

