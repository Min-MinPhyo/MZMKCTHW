{% extends "base.html" %}
{% block content %}

<div class="min-h-screen flex items-center justify-center bg-gradient-to-br from-indigo-100 to-blue-50 px-4 py-10">

  <div class="max-w-lg w-full bg-white rounded-3xl shadow-2xl p-8 relative overflow-hidden">

    <!-- Header -->
    <div class="text-center mb-4">
      <h2 class="text-3xl font-extrabold text-gray-800">üß† Quiz Game</h2>
      <p class="text-gray-500">Question {{ current }} / {{ total }}</p>
    </div>

    <!-- Timer -->
    <div class="flex justify-center mb-4">
      <div class="px-4 py-2 bg-red-100 text-red-600 font-bold rounded-full shadow">
        ‚è± Time Left: <span id="timer">{{ remaining_time }}</span>s
      </div>
    </div>

    <!-- Question -->
    <div class="bg-blue-50 rounded-2xl p-6 mb-6 shadow-inner text-center">
      <h3 class="text-xl font-semibold text-gray-700">
        {{ question.question }}
      </h3>
    </div>

    <!-- Options -->
    <form method="POST" id="quizForm" class="space-y-4">
      {% for opt in question.options %}
      <label class="flex items-center gap-3 p-4 rounded-xl border cursor-pointer hover:bg-blue-100 transition">
        <input type="radio" name="option" value="{{ opt }}" required class="accent-blue-600">
        <span class="font-medium">{{ opt }}</span>
      </label>
      {% endfor %}

<!-- Action Buttons -->
<div class="mt-6 space-y-4">

    <div class="flex flex-col sm:flex-row gap-4">

        <!-- Next -->
        <button type="submit"
            class="flex-1 py-3 bg-blue-600 text-white font-semibold rounded-xl shadow-md
                   hover:bg-blue-700 hover:scale-[1.02] transition-all duration-200">
            ‚û°Ô∏è Next Question
        </button>

        <!-- Quit -->
        <a href="{{ url_for('quiz_quit') }}"
           class="flex-1 py-3 bg-gray-600 text-white font-semibold rounded-xl shadow-md
                  hover:bg-gray-700 hover:scale-[1.02] transition-all duration-200
                  text-center">
            üè† Quit Quiz
        </a>

    </div>

    {% if current > 1 %}
    <div class="flex justify-center">
        <a href="{{ url_for('quiz_reset') }}"
           class="px-6 py-2 text-sm font-semibold rounded-lg
                  bg-red-100 text-red-600 border border-red-300
                  hover:bg-red-200 hover:scale-105 transition-all duration-200">
            üîÑ Restart Quiz
        </a>
    </div>
    {% endif %}

</div>


    </form>

    <!-- Progress -->
    {% set percent = (current / total) * 100 %}
    <div class="mt-6">
      <div class="h-3 bg-gray-200 rounded-full overflow-hidden">
        <div class="h-3 bg-gradient-to-r from-green-400 to-blue-500"
             style="width: {{ percent }}%"></div>
      </div>
      <p class="text-center text-sm text-gray-500 mt-1">{{ percent|round(0) }}% completed</p>
    </div>

  </div>
</div>

<!-- ‚è± Timer Script -->
<script>
  let timeLeft = {{ remaining_time }};
  const timerEl = document.getElementById("timer");

  const countdown = setInterval(() => {
    timeLeft--;
    timerEl.textContent = timeLeft;

    if (timeLeft <= 0) {
      clearInterval(countdown);
      document.getElementById("quizForm").submit();
    }
  }, 1000);
</script>

{% endblock %}
