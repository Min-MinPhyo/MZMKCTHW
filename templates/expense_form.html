{% extends "base.html" %}
{% block content %}

<div class="max-w-md mx-auto bg-white p-8 rounded-xl shadow-lg mt-10">

  <!-- Title -->
  <h1 class="text-3xl font-bold mb-6 text-center text-gray-800">
    Add Expense
  </h1>

  <form method="POST" class="space-y-5">

    <!-- Date -->
    <div class="flex flex-col">
      <label class="text-gray-700 font-semibold mb-1">Date</label>
      <input type="date" name="date"
             value="{{ form_data.date if form_data else current_date }}"
             class="p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-red-400">
    </div>

    <!-- Category -->
    <div class="flex flex-col">
      <label class="text-gray-700 font-semibold mb-1">Category</label>
      <select name="category"
              class="p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-red-400">
        {% for cat in categories %}
        <option value="{{ cat }}" {% if form_data and form_data.category == cat %}selected{% endif %}>
          {{ cat }}
        </option>
        {% endfor %}
      </select>
    </div>

    <!-- Amount -->
    <div class="flex flex-col">
      <label class="text-gray-700 font-semibold mb-1">Amount</label>
      <input type="number" step="0.01" name="amount"
             value="{{ form_data.amount if form_data else '' }}"
             placeholder="Enter amount in MMK"
             class="p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-red-400">
    </div>

    <!-- Description -->
    <div class="flex flex-col">
      <label class="text-gray-700 font-semibold mb-1">Description</label>
      <input type="text" name="description"
             value="{{ form_data.description if form_data else '' }}"
             placeholder="Optional note"
             class="p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-red-400">
    </div>

    <!-- Confirm Warning -->
    {% if show_confirm %}
    <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded shadow-inner">
      <p class="text-yellow-800 font-semibold mb-2">
        ⚠ Warning: This will use all your remaining balance.
      </p>
      <label class="flex items-center gap-2 text-gray-700">
        <input type="checkbox" name="confirm" value="yes" class="w-4 h-4 border-gray-300 rounded" required>
        Yes, I understand and want to continue
      </label>
    </div>
    {% endif %}

    <!-- Submit Button -->
    <button type="submit"
            class="w-full bg-red-500 hover:bg-red-600 text-white py-2 rounded-lg font-semibold shadow-md transition-colors">
      Add Expense
    </button>

  </form>

  <!-- Back to Dashboard -->
  <p class="mt-6 text-center">
    <a href="{{ url_for('dashboard') }}"
       class="text-blue-500 hover:text-blue-700 font-medium transition-colors">
      ← Back to Dashboard
    </a>
  </p>

</div>

{% endblock %}
