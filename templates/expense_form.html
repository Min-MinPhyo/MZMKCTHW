{% extends "base.html" %}
{% block content %}

<div class="max-w-md mx-auto mt-12 bg-white p-8 rounded-2xl shadow-xl">

  <h1 class="text-3xl font-extrabold text-center text-gray-800 mb-8">
    {% if mode == "edit" %}
      {{ t("edit_expense_title") }}
    {% else %}
      {{ t("add_expense_title") }}
    {% endif %}
  </h1>

  <form method="POST" class="space-y-5">

    <div class="flex flex-col">
      <label class="text-gray-700 font-semibold mb-1">{{ t("date") }}</label>
      <input type="date" name="date"
        value="{{ (form_data|default({})).get('date', current_date|default('')) }}"
        class="p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-red-400">
    </div>

    <div class="flex flex-col">
      <label class="text-gray-700 font-semibold mb-1">{{ t("category") }}</label>
      <select name="category"
        class="p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-red-400">
        <option value="">{{ t("select_category") }}</option>
        {% for cat in categories %}
          <option value="{{ cat }}"
            {% if (form_data|default({})).get('category') == cat %}selected{% endif %}>
            {{ t(cat) }} 
          </option>
        {% endfor %}
      </select>
    </div>

    <div class="flex flex-col">
      <label class="text-gray-700 font-semibold mb-1">{{ t("amount") }}</label>
      <input type="number" step="0.01" name="amount"
        value="{{ (form_data|default({})).get('amount', '') }}"
        placeholder="{{ t('amount_placeholder') }}"
        class="p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-red-400">
    </div>

    <div class="flex flex-col">
      <label class="text-gray-700 font-semibold mb-1">{{ t("description") }}</label>
      <input type="text" name="description"
        value="{{ t((form_data|default({})).get('description', ''), is_user_data=True) }}"
        placeholder="{{ t('description_placeholder') }}"
        class="p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-red-400">
      <p class="text-xs text-gray-400 mt-1">{{ t("description_hint") }}</p>
    </div>

    {% if show_confirm %}
    <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded-lg shadow-inner">
      <p class="text-yellow-800 font-semibold mb-2">
        ⚠ {{ t("expense_warning") }}
      </p>
      <label class="flex items-center gap-2 text-gray-700">
        <input type="checkbox" name="confirm" value="yes" required>
        {{ t("confirm_continue") }}
      </label>
    </div>
    {% endif %}

    <button type="submit"
      class="w-full py-2 rounded-lg font-semibold text-white shadow-md
      {% if mode == 'edit' %}bg-blue-500 hover:bg-blue-600{% else %}bg-red-500 hover:bg-red-600{% endif %} transition-colors">
      {% if mode == "edit" %}
        {{ t("update_expense_btn") }}
      {% else %}
        {{ t("add_expense_btn") }}
      {% endif %}
    </button>

  </form>

  <p class="mt-6 text-center">
    <a href="{{ url_for('dashboard') }}"
       class="text-blue-500 hover:text-blue-700 font-medium transition-colors">
       ← {{ t("back_dashboard") }}
    </a>
  </p>

</div>

{% endblock %}