{% extends "base.html" %}
{% block content %}

<div class="max-w-md mx-auto mt-10 bg-white p-8 rounded-xl shadow-lg">

  <!-- Title -->
  <h1 class="text-3xl font-bold mb-6 text-center text-gray-800">
    {% if mode == "edit" %}
      Edit Income
    {% else %}
      Add Income
    {% endif %}
  </h1>

  <form method="POST" class="space-y-5">

    <!-- Date -->
    <div class="flex flex-col">
      <label class="text-gray-700 font-semibold mb-1">Date</label>
      <input type="date" name="date"
        value="{% if mode == 'edit' %}{{ record[0] }}{% else %}{{ current_date }}{% endif %}"
        class="p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-green-400">
    </div>

    <!-- Category -->
    <div class="flex flex-col">
      <label class="text-gray-700 font-semibold mb-1">Category</label>
      <select name="category"
        class="p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-green-400">
        <option value="">Select Category</option>
        {% for cat in categories %}
          <option value="{{ cat }}"
            {% if mode == "edit" and record[1] == cat %}selected{% endif %}>
            {{ cat }}
          </option>
        {% endfor %}
      </select>
    </div>

    <!-- Amount -->
    <div class="flex flex-col">
      <label class="text-gray-700 font-semibold mb-1">Amount</label>
      <input type="number" step="0.01" name="amount"
        value="{% if mode == 'edit' %}{{ record[2] }}{% endif %}"
        placeholder="Enter amount in MMK"
        class="p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-green-400">
    </div>

    <!-- Description -->
    <div class="flex flex-col">
      <label class="text-gray-700 font-semibold mb-1">Description</label>
      <input type="text" name="description"
        value="{% if mode == 'edit' %}{{ record[3] }}{% endif %}"
        placeholder="Optional note"
        class="p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-green-400">
    </div>

    <!-- Submit Button -->
    <button type="submit"
      class="w-full py-2 rounded-lg font-semibold text-white shadow-md
      {% if mode == 'edit' %}bg-blue-500 hover:bg-blue-600{% else %}bg-green-500 hover:bg-green-600{% endif %} transition-colors">
      {% if mode == "edit" %}
        Update Income
      {% else %}
        Add Income
      {% endif %}
    </button>

  </form>

  <!-- Back Link -->
  <p class="mt-6 text-center">
    <a href="{{ url_for('dashboard') }}"
       class="text-blue-500 hover:text-blue-700 font-medium transition-colors">
       ‚Üê Back to Dashboard
    </a>
  </p>

</div>

{% endblock %}
