{% extends "base.html" %}
{% block content %}

<div class="max-w-md mx-auto bg-white p-6 rounded-xl shadow-lg mt-6">
  
  <!-- TITLE -->
  <h1 class="text-2xl font-bold text-center mb-6">{{ t("edit_profile_title") }}</h1>

  <!-- PROFILE FORM -->
  <form method="POST" action="{{ url_for('update_profile') }}" class="space-y-4">

    {% set fields = [
      {"label": t("username"), "name": "username", "type": "text", "value": user.username, "placeholder": t("enter_username"), "required": True},
      {"label": t("email"), "name": "email", "type": "email", "value": user.email, "placeholder": "", "readonly": True},
      {"label": t("old_password"), "name": "old_password", "type": "password", "value": "", "placeholder": "", "required": True},
      {"label": t("new_password"), "name": "new_password", "type": "password", "value": "", "placeholder": t("leave_blank_to_keep"), "required": False}
    ] %}

    {% for field in fields %}
      <div>
        <label class="block font-semibold mb-1">{{ field.label }}</label>
        <input 
          type="{{ field.type }}" 
          name="{{ field.name }}" 
          value="{{ field.value }}" 
          placeholder="{{ field.placeholder }}" 
          {% if field.required %} required {% endif %}
          {% if field.readonly %} readonly class="w-full border p-2 rounded-lg bg-gray-100" {% else %} class="w-full border p-2 rounded-lg" {% endif %}
        />
      </div>
    {% endfor %}

    <!-- BUTTONS -->
    {% set buttons = [
      {"text": t("update_btn"), "url": "", "type": "submit", "class": "bg-blue-500 hover:bg-blue-600 text-white"},
      {"text": t("cancel_edit"), "url": url_for("profile"), "type": "link", "class": "bg-gray-500 hover:bg-gray-600 text-white"}
    ] %}

    <div class="flex gap-3 mt-4">
      {% for btn in buttons %}
        {% if btn.type == "submit" %}
          <button class="flex-1 py-2 rounded-lg {{ btn.class }}">{{ btn.text }}</button>
        {% else %}
          <a href="{{ btn.url }}" class="flex-1 text-center py-2 rounded-lg {{ btn.class }}">{{ btn.text }}</a>
        {% endif %}
      {% endfor %}
    </div>

  </form>
</div>

{% endblock %}
